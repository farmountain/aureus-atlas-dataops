# AUREUS Guard Evidence Directory

This directory contains evidence artifacts generated by the AUREUS guard runtime during policy evaluation, audit logging, and snapshot operations.

## Structure

Each smoke run creates a timestamped subdirectory with the following files:

- `audit_log_*.json` - Complete audit log with all policy decisions
- `snapshots_*.json` - All state snapshots created during execution
- `budget_usage_*.json` - Token and query cost budget tracking
- `guard_summary_*.json` - Overall guard statistics and configuration

## Evidence Pack Format

### Audit Log
```json
{
  "timestamp": "2024-01-01T00:00:00.000Z",
  "environment": "dev|uat|prod",
  "events": [
    {
      "id": "unique-event-id",
      "timestamp": "...",
      "actor": "user-id",
      "role": "analyst|approver|admin|viewer",
      "action": "query_execute|dataset_create|...",
      "environment": "dev|uat|prod",
      "decision": {
        "allow": true|false,
        "requiresApproval": true|false,
        "reason": "...",
        "policyId": "...",
        "policyName": "..."
      },
      "snapshotId": "...",
      "metadata": {}
    }
  ],
  "summary": {
    "total": 0,
    "success": 0,
    "blocked": 0,
    "requiresApproval": 0
  }
}
```

### Snapshots
```json
{
  "timestamp": "2024-01-01T00:00:00.000Z",
  "environment": "dev|uat|prod",
  "snapshots": [
    {
      "id": "unique-snapshot-id",
      "timestamp": "...",
      "actor": "user-id",
      "action": "query_execute|dataset_create|...",
      "environment": "dev|uat|prod",
      "state": {
        "metadata": {},
        "specs": {}
      },
      "parentSnapshotId": "..."
    }
  ],
  "summary": {
    "total": 0,
    "byAction": {}
  }
}
```

### Budget Usage
```json
{
  "timestamp": "2024-01-01T00:00:00.000Z",
  "environment": "dev|uat|prod",
  "limits": {
    "tokenBudget": 10000,
    "queryCostBudget": 100
  },
  "usage": {
    "tokensUsed": 0,
    "queryCostUsed": 0
  },
  "utilization": {
    "tokens": "0.00%",
    "queryCost": "0.00%"
  }
}
```

## Usage

Evidence is automatically generated when:
1. Actions are executed through the guard
2. Manual evidence export is triggered via `guard.exportEvidence()`
3. Smoke tests run successfully

## Compliance Notes

These evidence packs satisfy EGD (Evidence-Gated Development) requirements by providing:
- Complete audit trail of all policy decisions
- Immutable snapshots for rollback capability
- Budget tracking and enforcement records
- Tamper-evident structure (future: cryptographic signatures)
