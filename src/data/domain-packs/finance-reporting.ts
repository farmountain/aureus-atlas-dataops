import type { DomainPack } from './types'

export const financeReportingPack: DomainPack = {
  domain: 'Finance/Reg Reporting',
  description: 'Financial and regulatory reporting reconciliation and control processes',
  datasets: [
    {
      id: 'fin_general_ledger',
      name: 'General Ledger',
      description: 'Core general ledger with all financial transactions',
      domain: 'Finance/Reg Reporting',
      owner: 'Finance & Accounting Team',
      piiLevel: 'NONE',
      jurisdiction: 'US',
      freshnessSLA: 'DAILY',
      sampleRowCount: 500000,
      columns: [
        {
          name: 'entry_id',
          type: 'string',
          description: 'Unique journal entry identifier',
          nullable: false,
        },
        {
          name: 'entry_date',
          type: 'date',
          description: 'Date of journal entry',
          nullable: false,
        },
        {
          name: 'posting_date',
          type: 'date',
          description: 'Date entry was posted to ledger',
          nullable: false,
        },
        {
          name: 'account_number',
          type: 'string',
          description: 'GL account number',
          nullable: false,
        },
        {
          name: 'account_name',
          type: 'string',
          description: 'GL account description',
          nullable: false,
        },
        {
          name: 'account_type',
          type: 'string',
          description: 'Account classification (ASSET, LIABILITY, EQUITY, REVENUE, EXPENSE)',
          nullable: false,
        },
        {
          name: 'debit_amount',
          type: 'decimal',
          description: 'Debit amount in USD',
          nullable: true,
        },
        {
          name: 'credit_amount',
          type: 'decimal',
          description: 'Credit amount in USD',
          nullable: true,
        },
        {
          name: 'net_amount',
          type: 'decimal',
          description: 'Net amount (debit - credit)',
          nullable: false,
        },
        {
          name: 'currency',
          type: 'string',
          description: 'Transaction currency',
          nullable: false,
        },
        {
          name: 'entity_code',
          type: 'string',
          description: 'Legal entity identifier',
          nullable: false,
        },
        {
          name: 'cost_center',
          type: 'string',
          description: 'Cost center code',
          nullable: true,
        },
        {
          name: 'product_line',
          type: 'string',
          description: 'Product line or business segment',
          nullable: true,
        },
        {
          name: 'source_system',
          type: 'string',
          description: 'Originating system',
          nullable: false,
        },
        {
          name: 'entry_type',
          type: 'string',
          description: 'Type of entry (ACTUAL, ACCRUAL, REVERSAL, ADJUSTMENT)',
          nullable: false,
        },
        {
          name: 'reversal_flag',
          type: 'boolean',
          description: 'Indicates if this is a reversal entry',
          nullable: false,
        },
        {
          name: 'reversed_entry_id',
          type: 'string',
          description: 'ID of entry being reversed',
          nullable: true,
        },
        {
          name: 'description',
          type: 'string',
          description: 'Entry description or memo',
          nullable: true,
        },
        {
          name: 'created_by',
          type: 'string',
          description: 'User who created entry',
          nullable: false,
        },
        {
          name: 'approved_by',
          type: 'string',
          description: 'User who approved entry',
          nullable: true,
        },
        {
          name: 'approval_date',
          type: 'timestamp',
          description: 'When entry was approved',
          nullable: true,
        },
      ],
    },
    {
      id: 'fin_reconciliation_control',
      name: 'Reconciliation Control Log',
      description: 'Tracking of reconciliation processes and control breaks',
      domain: 'Finance/Reg Reporting',
      owner: 'Finance & Accounting Team',
      piiLevel: 'NONE',
      jurisdiction: 'US',
      freshnessSLA: 'DAILY',
      sampleRowCount: 10000,
      columns: [
        {
          name: 'recon_id',
          type: 'string',
          description: 'Unique reconciliation identifier',
          nullable: false,
        },
        {
          name: 'recon_date',
          type: 'date',
          description: 'Date of reconciliation',
          nullable: false,
        },
        {
          name: 'recon_type',
          type: 'string',
          description: 'Type of reconciliation (BALANCE_SHEET, SUBLEDGER, INTERCOMPANY, REGULATORY)',
          nullable: false,
        },
        {
          name: 'account_number',
          type: 'string',
          description: 'Account being reconciled',
          nullable: false,
        },
        {
          name: 'source_system_balance',
          type: 'decimal',
          description: 'Balance from source system',
          nullable: false,
        },
        {
          name: 'gl_balance',
          type: 'decimal',
          description: 'Balance in general ledger',
          nullable: false,
        },
        {
          name: 'variance_amount',
          type: 'decimal',
          description: 'Difference between source and GL',
          nullable: false,
        },
        {
          name: 'variance_percentage',
          type: 'decimal',
          description: 'Variance as percentage',
          nullable: false,
        },
        {
          name: 'tolerance_threshold',
          type: 'decimal',
          description: 'Acceptable variance threshold',
          nullable: false,
        },
        {
          name: 'within_tolerance',
          type: 'boolean',
          description: 'Whether variance is within tolerance',
          nullable: false,
        },
        {
          name: 'status',
          type: 'string',
          description: 'Reconciliation status (PENDING, RECONCILED, BREAK, ESCALATED)',
          nullable: false,
        },
        {
          name: 'break_reason',
          type: 'string',
          description: 'Reason for reconciliation break',
          nullable: true,
        },
        {
          name: 'resolution_action',
          type: 'string',
          description: 'Actions taken to resolve break',
          nullable: true,
        },
        {
          name: 'performed_by',
          type: 'string',
          description: 'User who performed reconciliation',
          nullable: false,
        },
        {
          name: 'reviewed_by',
          type: 'string',
          description: 'User who reviewed reconciliation',
          nullable: true,
        },
        {
          name: 'completion_date',
          type: 'timestamp',
          description: 'When reconciliation was completed',
          nullable: true,
        },
      ],
    },
    {
      id: 'fin_regulatory_reports',
      name: 'Regulatory Report Submissions',
      description: 'Regulatory reports filed with authorities (Call Report, FINREP, etc.)',
      domain: 'Finance/Reg Reporting',
      owner: 'Regulatory Reporting Team',
      piiLevel: 'NONE',
      jurisdiction: 'US',
      freshnessSLA: 'MONTHLY',
      sampleRowCount: 500,
      columns: [
        {
          name: 'report_id',
          type: 'string',
          description: 'Unique report identifier',
          nullable: false,
        },
        {
          name: 'report_type',
          type: 'string',
          description: 'Type of regulatory report (CALL_REPORT, FINREP, COREP, FR_Y9C)',
          nullable: false,
        },
        {
          name: 'reporting_period',
          type: 'date',
          description: 'Period ending date for report',
          nullable: false,
        },
        {
          name: 'submission_date',
          type: 'date',
          description: 'Date report was submitted',
          nullable: false,
        },
        {
          name: 'due_date',
          type: 'date',
          description: 'Regulatory due date',
          nullable: false,
        },
        {
          name: 'days_early_late',
          type: 'integer',
          description: 'Days before/after due date (negative = late)',
          nullable: false,
        },
        {
          name: 'regulator',
          type: 'string',
          description: 'Regulatory authority (FED, OCC, FDIC, ECB)',
          nullable: false,
        },
        {
          name: 'report_version',
          type: 'string',
          description: 'Version or revision number',
          nullable: false,
        },
        {
          name: 'amendment_flag',
          type: 'boolean',
          description: 'Whether this is an amended filing',
          nullable: false,
        },
        {
          name: 'original_report_id',
          type: 'string',
          description: 'ID of original report if amendment',
          nullable: true,
        },
        {
          name: 'total_assets',
          type: 'decimal',
          description: 'Total assets reported (USD millions)',
          nullable: true,
        },
        {
          name: 'total_liabilities',
          type: 'decimal',
          description: 'Total liabilities reported (USD millions)',
          nullable: true,
        },
        {
          name: 'total_equity',
          type: 'decimal',
          description: 'Total equity reported (USD millions)',
          nullable: true,
        },
        {
          name: 'net_income',
          type: 'decimal',
          description: 'Net income for period (USD millions)',
          nullable: true,
        },
        {
          name: 'validation_errors',
          type: 'integer',
          description: 'Number of validation errors',
          nullable: false,
        },
        {
          name: 'validation_warnings',
          type: 'integer',
          description: 'Number of validation warnings',
          nullable: false,
        },
        {
          name: 'certification_status',
          type: 'string',
          description: 'Officer certification status (PENDING, CERTIFIED)',
          nullable: false,
        },
        {
          name: 'certified_by',
          type: 'string',
          description: 'Officer who certified report',
          nullable: true,
        },
        {
          name: 'certification_date',
          type: 'timestamp',
          description: 'When report was certified',
          nullable: true,
        },
      ],
    },
  ],
  glossary: [
    {
      term: 'General Ledger (GL)',
      definition: 'The master set of accounts that summarize all transactions occurring within an entity, forming the basis for financial statements',
      domain: 'Finance/Reg Reporting',
      synonyms: ['GL', 'Book of Final Entry'],
      relatedDatasets: ['fin_general_ledger'],
    },
    {
      term: 'Chart of Accounts (COA)',
      definition: 'A complete listing of every account in the general ledger, organized by account type (assets, liabilities, equity, revenue, expenses)',
      domain: 'Finance/Reg Reporting',
      synonyms: ['COA', 'Account Structure'],
      relatedDatasets: ['fin_general_ledger'],
    },
    {
      term: 'Reconciliation',
      definition: 'The process of comparing two sets of records to ensure they are in agreement and accurate, identifying and explaining any differences',
      domain: 'Finance/Reg Reporting',
      synonyms: ['Recon', 'Account Reconciliation'],
      relatedDatasets: ['fin_reconciliation_control'],
    },
    {
      term: 'Control Break',
      definition: 'A variance or difference identified during reconciliation that exceeds tolerance thresholds and requires investigation',
      domain: 'Finance/Reg Reporting',
      synonyms: ['Reconciliation Break', 'Recon Exception'],
      relatedDatasets: ['fin_reconciliation_control'],
    },
    {
      term: 'Call Report',
      definition: 'Quarterly financial report (FFIEC 031/041) that US banks must file with federal regulators showing condition and income',
      domain: 'Finance/Reg Reporting',
      synonyms: ['FFIEC Report', 'Consolidated Reports of Condition and Income'],
      relatedDatasets: ['fin_regulatory_reports'],
    },
    {
      term: 'FINREP',
      definition: 'FINancial REPorting framework used by European banks for reporting to supervisors under EU regulations',
      domain: 'Finance/Reg Reporting',
      synonyms: ['Financial Reporting Framework'],
      relatedDatasets: ['fin_regulatory_reports'],
    },
    {
      term: 'Trial Balance',
      definition: 'A report listing all general ledger accounts and their balances at a point in time, used to verify debits equal credits',
      domain: 'Finance/Reg Reporting',
      synonyms: ['TB'],
      relatedDatasets: ['fin_general_ledger'],
    },
    {
      term: 'Financial Close',
      definition: 'The process of finalizing accounting books for a period by recording all transactions, reconciling accounts, and producing financial statements',
      domain: 'Finance/Reg Reporting',
      synonyms: ['Month End Close', 'Period Close', 'Books Close'],
      relatedDatasets: ['fin_general_ledger', 'fin_reconciliation_control'],
    },
  ],
  policies: [
    {
      id: 'pol_fin_gl_access',
      name: 'General Ledger Access Control',
      description: 'Restrict GL modifications to authorized finance users',
      scope: 'dataset',
      targetDatasets: ['fin_general_ledger'],
      conditions: {},
      actions: {
        allow: ['FINANCE_ANALYST', 'CONTROLLER', 'CFO'],
        deny: ['GUEST', 'VIEWER'],
      },
    },
    {
      id: 'pol_fin_recon_review',
      name: 'Reconciliation Review Requirement',
      description: 'All reconciliations must be reviewed by a second person',
      scope: 'dataset',
      targetDatasets: ['fin_reconciliation_control'],
      conditions: {},
      actions: {
        allow: ['FINANCE_ANALYST', 'ACCOUNTING_MANAGER'],
        require_approval: true,
      },
    },
    {
      id: 'pol_fin_reg_certification',
      name: 'Regulatory Report Certification',
      description: 'Regulatory reports require officer certification before submission',
      scope: 'dataset',
      targetDatasets: ['fin_regulatory_reports'],
      conditions: {},
      actions: {
        allow: ['CONTROLLER', 'CFO'],
        require_approval: true,
      },
    },
  ],
  sampleQuestions: [
    {
      question: 'How many reconciliation breaks are currently unresolved?',
      expectedIntent: {
        measures: ['recon_count'],
        dimensions: ['status'],
        filters: {
          status: 'BREAK,ESCALATED',
          within_tolerance: 'false',
        },
      },
      expectedDatasets: ['fin_reconciliation_control'],
      requiresApproval: false,
    },
    {
      question: 'Show me total assets and liabilities from the most recent regulatory reports by report type',
      expectedIntent: {
        measures: ['sum_total_assets', 'sum_total_liabilities', 'total_equity'],
        dimensions: ['report_type', 'reporting_period'],
        filters: {},
      },
      expectedDatasets: ['fin_regulatory_reports'],
      requiresApproval: false,
    },
  ],
  metadata: {
    version: '1.0.0',
    created: '2024-01-15',
    author: 'AUREUS Platform Team',
    tags: ['finance', 'accounting', 'regulatory-reporting', 'reconciliation', 'gaap', 'ifrs'],
  },
}
